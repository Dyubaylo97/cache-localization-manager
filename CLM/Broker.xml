<?xml version="1.0" encoding="UTF-8"?>
<Export generator="Cache" version="25" zv="Cache for UNIX (SUSE Linux Enterprise Server for x86-64) 2013.2 (Build 416U)" ts="2015-06-21 11:09:01">
<Class name="CLM.Broker">
<Super>isc.AbstractREST</Super>
<TimeChanged>63724,39465.305808</TimeChanged>
<TimeCreated>63714,58855.014604</TimeCreated>

<XData name="UrlMap">
<Data><![CDATA[
<Routes>
	<Route Url="/messages" Method="GET" Call="GetMessages"/>
	<Route Url="/messages" Method="PUT" Call="PutMessage"/>
	<Route Url="/test" Method="GET" Call="Test"/>
</Routes>
]]></Data>
</XData>

<Method name="Test">
<ClassMethod>1</ClassMethod>
<ReturnType>%Status</ReturnType>
<Implementation><![CDATA[
	w "test"
	q $$$OK
]]></Implementation>
</Method>

<Method name="GetMessages">
<ClassMethod>1</ClassMethod>
<ReturnType>%Status</ReturnType>
<Implementation><![CDATA[
	set %response.ContentType = "application/json"
	
	set domain = %request.Data("domain", 1)
	set language = %request.Data("language", 1)
	if ($DATA(%request.Data("spellcheck", 1))) {
		quit ##class(CLM.Utils).CheckMessages(domain, language, "^%qCacheMsg")
	} else {
		quit ##class(CLM.Utils).GetMessageList(domain, language, "^%qCacheMsg")
	}
]]></Implementation>
</Method>

<Method name="PutMessage">
<ClassMethod>1</ClassMethod>
<ReturnType>%Status</ReturnType>
<Implementation><![CDATA[
	set domain = %request.Data("domain", 1)
	set language = %request.Data("language", 1)
	set id = %request.Data("id", 1)
	set text = %request.Data("text", 1)
	quit ##class(CLM.Utils).PutMessage(domain, language, id, text, "^%qCacheMsg")
]]></Implementation>
</Method>
</Class>
</Export>
